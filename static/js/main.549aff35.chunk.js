(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){e.exports=n(264)},115:function(e,t,n){},124:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"geolocation",function(){return le}),n.d(r,"survey",function(){return se});var a={};n.r(a),n.d(a,"init",function(){return ke}),n.d(a,"showDroneQRScanner",function(){return Ae}),n.d(a,"hideDroneQRScanner",function(){return De}),n.d(a,"showSensorQRScanner",function(){return Ce}),n.d(a,"hideSensorQRScanner",function(){return Qe}),n.d(a,"setSurveyData",function(){return xe}),n.d(a,"setAnswer",function(){return Ee}),n.d(a,"setCurrentLocation",function(){return qe});var o=n(1),i=n.n(o),c=n(21),u=n.n(c);n(115),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(25),s=n(27),p=(n(265),n(6)),d=n(47),m=n(95),f=n(49),b=n(48),v=n(50),y=n(4),O=n(106),h=n.n(O),j=(n(124),n(97)),S=n.n(j),g=n(99),w=n.n(g),R=n(100),k=n.n(R),A=n(101),D=n.n(A),C=n(103),Q=n.n(C),x=n(102),E=n.n(x),q=n(96),I=n.n(q);var T=Object(s.connect)({},function(e){return i.a.createElement(S.a,{fullScreen:!0,open:e.open},i.a.createElement(w.a,null,i.a.createElement(k.a,null,i.a.createElement(D.a,{color:"inherit",onClick:e.onClose,"aria-label":"Close"},i.a.createElement(E.a,null)),i.a.createElement(Q.a,{variant:"h6",color:"inherit"},"Scan QR code"))),i.a.createElement(I.a,{style:{width:"100%"},onScan:function(t){t&&(e.onData(t),e.onClose())}}))}),L=n(109),V=n(61),M=n(104),U=n.n(M),B=n(105),P=n.n(B),H=n(40),N=(n(253),{model:null});function F(){var e=Object(p.a)(["initSurvey"]);return F=function(){return e},e}function G(){var e=Object(p.a)(["questions"]);return G=function(){return e},e}function J(){var e=Object(p.a)(["",""]);return J=function(){return e},e}H.JsonObject.metaData.addProperty("question",{name:"cerebralbutton"});var W=Object(s.connect)({questions:Object(y.state)(G()),init:Object(y.signal)(F())},function(e,t,n){var r=e.questions,a=Object(V.a)(e,["questions"]),o=new H.Model(r);return N.model=o,Object(L.a)({},t,a,{get:n,model:o})},function(e){var t=e.get,n=Object(V.a)(e,["get"]);return i.a.createElement(H.Survey,Object.assign({},n,{completedHtml:U.a.renderToString(n.completedHtml),onAfterRenderQuestion:function(e,n){var r=n.question,a=n.htmlElement;r.cerebralbutton&&u.a.render(i.a.createElement(P.a,{onClick:t(Object(y.signal)(J(),r.cerebralbutton))},r.title),a)}}))});function z(){var e=Object(p.a)(["init"]);return z=function(){return e},e}function $(){var e=Object(p.a)(["setSurveyData"]);return $=function(){return e},e}function Y(){var e=Object(p.a)(["hideSensorQRScanner"]);return Y=function(){return e},e}function Z(){var e=Object(p.a)(["hideDroneQRScanner"]);return Z=function(){return e},e}function K(){var e=Object(p.a)(["showSensorQRScanner"]);return K=function(){return e},e}function X(){var e=Object(p.a)(["showDroneQRScanner"]);return X=function(){return e},e}function _(){var e=Object(p.a)(["sensorQRScannerActive"]);return _=function(){return e},e}function ee(){var e=Object(p.a)(["droneQRScannerActive"]);return ee=function(){return e},e}function te(){var e=Object(p.a)(["questions"]);return te=function(){return e},e}var ne=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,null),i.a.createElement("div",{className:"App"},i.a.createElement(T,{open:e.droneQRScannerActive,onClose:e.hideDroneQRScanner}),i.a.createElement(T,{open:e.sensorQRScannerActive,onClose:e.hideSensorQRScanner}),i.a.createElement(W,{isSinglePage:!1,completedHtml:i.a.createElement("div",null," woo done!"),onValueChanged:function(t){var n=t.data;return e.setSurveyData({data:n})},onComplete:function(e){var t=e.data;return console.log(JSON.stringify(t))}})))}}]),t}(o.Component),re=Object(s.connect)({questions:Object(y.state)(te()),droneQRScannerActive:Object(y.state)(ee()),sensorQRScannerActive:Object(y.state)(_()),showDroneQRScanner:Object(y.signal)(X()),showSensorQRScanner:Object(y.signal)(K()),hideDroneQRScanner:Object(y.signal)(Z()),hideSensorQRScanner:Object(y.signal)(Y()),setSurveyData:Object(y.signal)($()),init:Object(y.signal)(z())},ne),ae=n(108),oe=n(60),ie=n.n(oe),ce=n(107),ue=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).name="GetLocationError",n}return Object(v.a)(t,e),t}(l.CerebralError),le={getCurrentLoc:function(){var e=Object(ce.a)(ie.a.mark(function e(){var t;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise(function(e,t){return navigator.geolocation.getCurrentPosition(e,t)}).then(function(e){return e.coords});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),e.t1=e.t0.code,e.next=1===e.t1?11:2===e.t1?13:3===e.t1?15:17;break;case 11:return t="Permission denied",e.abrupt("break",18);case 13:return t="Position unavailable",e.abrupt("break",18);case 15:return t="Timeout obtaining position",e.abrupt("break",18);case 17:t="Unknown error";case 18:throw new ue(t);case 19:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},se={setAnswer:function(e,t){N.model.setValue(e,t)},setData:function(e){N.model.data=e}},pe=n(23);function de(e){var t=e.survey,n=e.props;return t.setAnswer(n.question,n.answer)}function me(){var e=Object(p.a)(["currentLoc.longitude"]);return me=function(){return e},e}function fe(){var e=Object(p.a)(["answer"]);return fe=function(){return e},e}function be(){var e=Object(p.a)(["question"]);return be=function(){return e},e}function ve(){var e=Object(p.a)(["currentLoc.latitude"]);return ve=function(){return e},e}function ye(){var e=Object(p.a)(["answer"]);return ye=function(){return e},e}function Oe(){var e=Object(p.a)(["question"]);return Oe=function(){return e},e}function he(){var e=Object(p.a)(["data"]);return he=function(){return e},e}function je(){var e=Object(p.a)(["surveyData"]);return je=function(){return e},e}function Se(){var e=Object(p.a)(["sensorQRScannerActive"]);return Se=function(){return e},e}function ge(){var e=Object(p.a)(["sensorQRScannerActive"]);return ge=function(){return e},e}function we(){var e=Object(p.a)(["droneQRScannerActive"]);return we=function(){return e},e}function Re(){var e=Object(p.a)(["droneQRScannerActive"]);return Re=function(){return e},e}var ke=[],Ae=[Object(pe.a)(Object(y.state)(Re()),!0)],De=[Object(pe.a)(Object(y.state)(we()),!1)],Ce=[Object(pe.a)(Object(y.state)(ge()),!0)],Qe=[Object(pe.a)(Object(y.state)(Se()),!1)],xe=[Object(pe.a)(Object(y.state)(je()),Object(y.props)(he()))],Ee=[de],qe=[function(e){return e.geolocation.getCurrentLoc().then(function(e){return{currentLoc:{latitude:e.latitude,longitude:e.longitude}}})},Object(pe.a)(Object(y.props)(Oe()),"latitude"),Object(pe.a)(Object(y.props)(ye()),Object(y.props)(ve())),de,Object(pe.a)(Object(y.props)(be()),"longitude"),Object(pe.a)(Object(y.props)(fe()),Object(y.props)(me())),de],Ie=new Date((new Date).toLocaleString()+" UTC").toISOString().split(/[TZ]/),Te=Object(ae.a)(Ie,2),Le=Te[0],Ve=Te[1],Me=Object(l.Module)({signals:a,state:{droneQRScannerActive:!1,sensorQRScannerActive:!1,surveyData:null,questions:{pages:[{name:"general",title:"General",elements:[{name:"purpose",title:"Purpose",type:"dropdown",choices:["UAV","Planting","Spraying","Tilling","Harvest"],defaultValue:"UAV"},{name:"datetime",title:"Date/Time of data",type:"multipletext",defaultValue:{date:Le,time:Ve},items:[{name:"date",title:"Date",inputType:"date"},{name:"time",title:"Time",inputType:"time"}]},{name:"location",title:"Collection location",type:"panel",elements:[{name:"location-button",title:"Get current location",type:"html",cerebralbutton:"setCurrentLocation"},{name:"latitude",title:"Latitude",type:"text",isRequired:!0},{name:"longitude",title:"Longitude",type:"text",isRequired:!0}]},{name:"notes",title:"Notes or comments",type:"comment"}]},{name:"uav-operator",title:"UAV Operator",visibleIf:'{purpose} == "UAV"',elements:[{name:"license",title:"Operator License",type:"text",isRequired:!0,placeHolder:"1234567",validators:[{type:"regex",regex:/^[0-9]{7}$/,text:"Invalid license number"}]},{name:"operator",title:"Operator",type:"text",isRequired:!0,placeHolder:"Rusty Shackleford"},{name:"observer",title:"Observer",type:"text",placeHolder:"John Doe"}]},{name:"uav-drone",title:"Drone Info",visibleIf:'{purpose} == "UAV"',elements:[{name:"drone-screenshot",title:"Screenshot of DroneDeploy",type:"file",allowMultiple:!1},{name:"drone-qr",title:"Scan drone QR code",type:"html",cerebralbutton:"showDroneQRScanner"},{name:"uav-drone-type",title:"Type",type:"dropdown",isRequired:!0,defaultValue:"Fixed wing",hasOther:!0,choices:["Fixed wing","Multi-rotor","Helicopter"]},{name:"uav-drone",title:"Drone",type:"dropdown",hideIfChoicesEmpty:!0,choices:[{make:"Test",model:"testtest",type:"Fixed wing"}].map(function(e,t){return{text:e.make+" "+e.model,value:e.make+" "+e.model,visibleIf:'{uav-drone-type} == "'.concat(e.type,'"')}})},{name:"uav-drone-make",title:"Make",type:"text",enableIf:"{uav-drone} empty"},{name:"uav-drone-model",title:"Model",type:"text",enableIf:"{uav-drone} empty"}]},{name:"uav-sensors",title:"Sensors",visibleIf:'{purpose} == "UAV"',elements:[{name:"sensor-qr",type:"html",cerebralbutton:"showSensorQRScanner"},{name:"sensors",title:"Sensors",type:"paneldynamic",panelCount:1,panelAddText:"Add Sensor",panelRemoveText:"Remove Sensor",templateTitle:"Sensor #{panelIndex}",templateElements:[{name:"uav-sensor-type",valueName:"type",title:"Type",type:"dropdown",isRequired:!0,hasOther:!0,choices:["RGB","Multispectral","Hyperspectral","LiDAR","Thermal"]},{name:"uav-sensor",valueName:"sensor",title:"Sensor",type:"dropdown",hideIfChoicesEmpty:!0,choices:[{make:"Sony",model:"A6000",type:"RGB"},{make:"Parrot",model:"Sequoia",type:"Multispectral"}].map(function(e,t){return{text:e.make+" "+e.model,value:e.make+" "+e.model,visibleIf:'{panel.type} == "'.concat(e.type,'"')}})},{name:"uav-sensor-make",valueName:"sensor.make",title:"Make",type:"text",enableIf:"{panel.sensor} empty"},{name:"uav-sensor-model",valueName:"model",title:"Model",type:"text",enableIf:"{panel.sensor} empty"}]}]},{name:"b4ufly",title:"B4UFLY Status",visibleIf:'{purpose} == "UAV"',elements:[{name:"b4ufly-status",title:"Status",type:"dropdown",isRequired:!0,choices:["proceed with caution","flying in controlled airspace (class B/C/D/E)","other"]},{name:"b4ufly-extra",title:"",type:"panel",visibleIf:'{b4ufly-status} == "flying in controlled airspace (class B/C/D/E)" or {b4ufly-status} == "other"',elements:[{name:"b4ufly-airport-operator",title:"Airport Operator Contact",type:"text",requiredIf:'{b4ufly-status} == "flying in controlled airspace (class B/C/D/E)"'},{name:"b4ufly-control-tower",title:"Control Tower Contact",type:"text",requiredIf:'{b4ufly-status} == "flying in controlled airspace (class B/C/D/E)"'},{name:"b4ufly-prior-authorization",title:"Prior Authorization",type:"text",requiredIf:'{b4ufly-status} == "flying in controlled airspace (class B/C/D/E)"'}]},{name:"b4ufly-options",title:"Options",type:"checkbox",isRequired:!0,choices:["checked NOTAMS","checked flight restrictions","checked local restrictions","checked upcoming restrictions","checked national parks"]}]},{name:"planting",visibleIf:'!({purpose} == "UAV")',elements:[{name:"nyi",type:"html",html:"Not yet implemented"}]}]}},providers:r}),Ue=Object(l.Controller)(Me,{devtools:null});u.a.render(i.a.createElement(s.Container,{controller:Ue},i.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[110,2,1]]]);
//# sourceMappingURL=main.549aff35.chunk.js.map