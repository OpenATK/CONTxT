(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){e.exports=n(298)},134:function(e,t,n){},143:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"geolocation",function(){return We}),n.d(r,"survey",function(){return ze});var a={};n.r(a),n.d(a,"init",function(){return ft}),n.d(a,"showDroneQRScanner",function(){return bt}),n.d(a,"hideDroneQRScanner",function(){return vt}),n.d(a,"showSensorQRScanner",function(){return gt}),n.d(a,"hideSensorQRScanner",function(){return Ot}),n.d(a,"showNavigation",function(){return jt}),n.d(a,"hideNavigation",function(){return ht}),n.d(a,"setSurveyData",function(){return yt}),n.d(a,"setAnswer",function(){return St}),n.d(a,"setSurveyPage",function(){return Pt}),n.d(a,"setPages",function(){return wt}),n.d(a,"goNextPage",function(){return Et}),n.d(a,"goPreviousPage",function(){return Nt}),n.d(a,"completeSurvey",function(){return kt}),n.d(a,"setCurrentLocation",function(){return Rt});var o=n(1),u=n.n(o),c=n(21),i=n.n(c);n(134),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(30),l=n(28),p=(n(299),n(5)),m=n(39),d=n(57),f=n(41),b=n(40),v=n(42),g=n(3),O=n(114),j=n.n(O),h=n(58),y=n.n(h),S=n(59),P=n.n(S),w=n(44),E=n.n(w),N=n(60),k=n.n(N),R=n(115),q=n.n(R),C=n(116),x=n.n(C),A=n(117),D=n.n(A),Q=n(118),I=n.n(Q),T=n(123),V=n.n(T),L=n(124),M=n.n(L),B=n(119),U=n.n(B),H=n(120),F=n.n(H),G=n(121),J=n.n(G),W=n(122),z=n.n(W),$=n(125),Y=n.n($),Z=(n(143),n(110)),K=n.n(Z),X=n(55),_=n.n(X),ee=n(112),te=n.n(ee),ne=n(109),re=n.n(ne);var ae=Object(l.connect)({},function(e){return u.a.createElement(K.a,{fullScreen:!0,open:e.open},u.a.createElement(y.a,null,u.a.createElement(P.a,null,u.a.createElement(k.a,{color:"inherit",onClick:e.onClose,"aria-label":"Close"},u.a.createElement(te.a,null)),u.a.createElement(_.a,{variant:"h6",color:"inherit"},"Scan QR code"))),u.a.createElement(re.a,{style:{width:"100%"},onScan:function(t){t&&(e.onData(t),e.onClose())}}))}),oe=n(128),ue=n(113),ce=n.n(ue),ie=n(32),se=(n(267),{model:null});function le(){var e=Object(p.a)(["setPages"]);return le=function(){return e},e}function pe(){var e=Object(p.a)(["setSurveyPage"]);return pe=function(){return e},e}function me(){var e=Object(p.a)(["setSurveyData"]);return me=function(){return e},e}function de(){var e=Object(p.a)(["initSurvey"]);return de=function(){return e},e}function fe(){var e=Object(p.a)(["questions"]);return fe=function(){return e},e}function be(){var e=Object(p.a)(["",""]);return be=function(){return e},e}function ve(){var e=Object(p.a)(["pageNum"]);return ve=function(){return e},e}function ge(){var e=Object(p.a)(["pageNum"]);return ge=function(){return e},e}function Oe(){var e=Object(p.a)(["pageNum"]);return Oe=function(){return e},e}function je(){var e=Object(p.a)(["surveyData"]);return je=function(){return e},e}ie.JsonObject.metaData.addProperty("question",{name:"cerebralbutton"});var he=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.get;this.model=new ie.Model(this.props.questions),se.model=this.model;var n=t(Object(g.state)(je()));n&&(this.model.data=n);var r=t(Object(g.state)(Oe()));void 0!==r&&(this.model.currentPageNo=r),this.props.reaction("changePage",{pageNum:Object(g.state)(ge())},function(t){var n=t.pageNum;return e.model.currentPageNo=n}),this.updatePages(this.model)}},{key:"updatePages",value:function(e){this.props.setPages({pages:e.visiblePages.map(function(e){return{error:e.hasErrors(!1,!1),name:e.name,title:e.title}})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.get,r=Object(oe.a)(t,["get"]);return u.a.createElement(ie.Survey,Object.assign({},r,{model:this.model,onCurrentPageChanged:function(e){n(Object(g.state)(ve()))!==e.currentPageNo&&r.setPage({pageNum:e.currentPageNo})},onPageVisibleChanged:this.updatePages.bind(this),onPageAdded:this.updatePages.bind(this),onValueChanged:function(t,n){n.name,n.value;r.setData({data:t.data}),setTimeout(function(){return e.updatePages(t)})},completedHtml:ce.a.renderToString(r.completedHtml),onAfterRenderQuestion:function(e,t){var r=t.question,a=t.htmlElement;r.cerebralbutton&&i.a.render(u.a.createElement(E.a,{onClick:n(Object(g.sequences)(be(),r.cerebralbutton))},r.title),a)}}))}}]),t}(o.Component),ye=Object(l.connect)({questions:Object(g.state)(fe()),init:Object(g.sequences)(de()),setData:Object(g.sequences)(me()),setPage:Object(g.sequences)(pe()),setPages:Object(g.sequences)(le())},he);function Se(){var e=Object(p.a)(["init"]);return Se=function(){return e},e}function Pe(){var e=Object(p.a)(["hideSensorQRScanner"]);return Pe=function(){return e},e}function we(){var e=Object(p.a)(["hideDroneQRScanner"]);return we=function(){return e},e}function Ee(){var e=Object(p.a)(["showSensorQRScanner"]);return Ee=function(){return e},e}function Ne(){var e=Object(p.a)(["showDroneQRScanner"]);return Ne=function(){return e},e}function ke(){var e=Object(p.a)(["sensorQRScannerActive"]);return ke=function(){return e},e}function Re(){var e=Object(p.a)(["droneQRScannerActive"]);return Re=function(){return e},e}function qe(){var e=Object(p.a)(["questions"]);return qe=function(){return e},e}function Ce(){var e=Object(p.a)(["completeSurvey"]);return Ce=function(){return e},e}function xe(){var e=Object(p.a)(["goPreviousPage"]);return xe=function(){return e},e}function Ae(){var e=Object(p.a)(["goNextPage"]);return Ae=function(){return e},e}function De(){var e=Object(p.a)(["pageNum"]);return De=function(){return e},e}function Qe(){var e=Object(p.a)(["pages"]);return Qe=function(){return e},e}function Ie(){var e=Object(p.a)(["setSurveyPage"]);return Ie=function(){return e},e}function Te(){var e=Object(p.a)(["hideNavigation"]);return Te=function(){return e},e}function Ve(){var e=Object(p.a)(["showNavigation"]);return Ve=function(){return e},e}function Le(){var e=Object(p.a)(["navigationOpen"]);return Le=function(){return e},e}var Me=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props;return u.a.createElement(u.a.Fragment,null,u.a.createElement(j.a,null),u.a.createElement("div",{className:"App"},u.a.createElement(y.a,{position:"static"},u.a.createElement(P.a,null,u.a.createElement(k.a,{onClick:function(){return e.showNavigation()},"aria-label":"Menu"},u.a.createElement(q.a,null)),u.a.createElement(E.a,{disabled:0===e.pageNum,onClick:function(){return e.goPreviousPage()}},u.a.createElement(x.a,null),"Previous"),u.a.createElement(E.a,{disabled:e.pageNum===e.pages.length-1,onClick:function(){return e.goNextPage()}},"Next",u.a.createElement(D.a,null)),u.a.createElement(E.a,{disabled:e.pages.some(function(e){return e.error}),onClick:function(){return e.submit()}},"Submit",u.a.createElement(I.a,null)))),u.a.createElement(U.a,{open:e.navigationOpen,onOpen:function(){return e.showNavigation()},onClose:function(){return e.hideNavigation()}},u.a.createElement(F.a,null,e.pages.map(function(t,n){var r=t.name,a=t.title,o=t.error;return u.a.createElement(J.a,{key:r,button:!0,selected:n===e.pageNum,className:o?"page-err":"page-complete",onClick:function(){return e.setSurveyPage({pageNum:n})}},u.a.createElement(z.a,null,o?u.a.createElement(V.a,null):u.a.createElement(M.a,null)),u.a.createElement(Y.a,{primary:a}))}))),u.a.createElement(ae,{open:e.droneQRScannerActive,onClose:e.hideDroneQRScanner}),u.a.createElement(ae,{open:e.sensorQRScannerActive,onClose:e.hideSensorQRScanner}),u.a.createElement(ye,{isSinglePage:!1,completedHtml:u.a.createElement("div",null," woo done!"),onComplete:function(e){var t=e.data;return console.log(JSON.stringify(t))}})))}}]),t}(o.Component),Be=Object(l.connect)({navigationOpen:Object(g.state)(Le()),showNavigation:Object(g.sequences)(Ve()),hideNavigation:Object(g.sequences)(Te()),setSurveyPage:Object(g.sequences)(Ie()),pages:Object(g.state)(Qe()),pageNum:Object(g.state)(De()),goNextPage:Object(g.sequences)(Ae()),goPreviousPage:Object(g.sequences)(xe()),submit:Object(g.sequences)(Ce()),questions:Object(g.state)(qe()),droneQRScannerActive:Object(g.state)(Re()),sensorQRScannerActive:Object(g.state)(ke()),showDroneQRScanner:Object(g.sequences)(Ne()),showSensorQRScanner:Object(g.sequences)(Ee()),hideDroneQRScanner:Object(g.sequences)(we()),hideSensorQRScanner:Object(g.sequences)(Pe()),init:Object(g.sequences)(Se())},Me),Ue=n(127),He=n(75),Fe=n.n(He),Ge=n(126),Je=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).name="GetLocationError",n}return Object(v.a)(t,e),t}(s.CerebralError),We={getCurrentLoc:function(){var e=Object(Ge.a)(Fe.a.mark(function e(){var t;return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise(function(e,t){return navigator.geolocation.getCurrentPosition(e,t)}).then(function(e){return e.coords});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),e.t1=e.t0.code,e.next=1===e.t1?11:2===e.t1?13:3===e.t1?15:17;break;case 11:return t="Permission denied",e.abrupt("break",18);case 13:return t="Position unavailable",e.abrupt("break",18);case 15:return t="Timeout obtaining position",e.abrupt("break",18);case 17:t="Unknown error";case 18:throw new Je(t);case 19:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},ze={setAnswer:function(e,t){se.model.setValue(e,t)},setPage:function(e){se.model.currentPageNo=e},nextPage:function(){return se.model.nextPage()},previousPage:function(){return se.model.prevPage()},setData:function(e){se.model.data=e},submit:function(){return se.model.completeLastPage()}},$e=n(20);function Ye(e){var t=e.survey,n=e.props;return t.setAnswer(n.question,n.answer)}function Ze(){var e=Object(p.a)(["currentLoc.longitude"]);return Ze=function(){return e},e}function Ke(){var e=Object(p.a)(["answer"]);return Ke=function(){return e},e}function Xe(){var e=Object(p.a)(["question"]);return Xe=function(){return e},e}function _e(){var e=Object(p.a)(["currentLoc.latitude"]);return _e=function(){return e},e}function et(){var e=Object(p.a)(["answer"]);return et=function(){return e},e}function tt(){var e=Object(p.a)(["question"]);return tt=function(){return e},e}function nt(){var e=Object(p.a)(["pages"]);return nt=function(){return e},e}function rt(){var e=Object(p.a)(["pages"]);return rt=function(){return e},e}function at(){var e=Object(p.a)(["pageNum"]);return at=function(){return e},e}function ot(){var e=Object(p.a)(["pageNum"]);return ot=function(){return e},e}function ut(){var e=Object(p.a)(["data"]);return ut=function(){return e},e}function ct(){var e=Object(p.a)(["surveyData"]);return ct=function(){return e},e}function it(){var e=Object(p.a)(["navigationOpen"]);return it=function(){return e},e}function st(){var e=Object(p.a)(["navigationOpen"]);return st=function(){return e},e}function lt(){var e=Object(p.a)(["sensorQRScannerActive"]);return lt=function(){return e},e}function pt(){var e=Object(p.a)(["sensorQRScannerActive"]);return pt=function(){return e},e}function mt(){var e=Object(p.a)(["droneQRScannerActive"]);return mt=function(){return e},e}function dt(){var e=Object(p.a)(["droneQRScannerActive"]);return dt=function(){return e},e}var ft=[],bt=[Object($e.a)(Object(g.state)(dt()),!0)],vt=[Object($e.a)(Object(g.state)(mt()),!1)],gt=[Object($e.a)(Object(g.state)(pt()),!0)],Ot=[Object($e.a)(Object(g.state)(lt()),!1)],jt=[Object($e.a)(Object(g.state)(st()),!0)],ht=[Object($e.a)(Object(g.state)(it()),!1)],yt=[Object($e.a)(Object(g.state)(ct()),Object(g.props)(ut()))],St=[Ye],Pt=[Object($e.a)(Object(g.state)(ot()),Object(g.props)(at()))],wt=[Object($e.a)(Object(g.state)(rt()),Object(g.props)(nt()))],Et=[function(e){return{error:e.survey.nextPage()}}],Nt=[function(e){return{error:e.survey.previousPage()}}],kt=[function(e){var t=e.survey;return e.props,{done:t.submit()}}],Rt=[function(e){return e.geolocation.getCurrentLoc().then(function(e){return{currentLoc:{latitude:e.latitude,longitude:e.longitude}}})},Object($e.a)(Object(g.props)(tt()),"latitude"),Object($e.a)(Object(g.props)(et()),Object(g.props)(_e())),Ye,Object($e.a)(Object(g.props)(Xe()),"longitude"),Object($e.a)(Object(g.props)(Ke()),Object(g.props)(Ze())),Ye];ie.Survey.cssType="material",ie.StylesManager.applyTheme("darkblue");var qt=new Date((new Date).toLocaleString()+" UTC").toISOString().split(/[TZ]/),Ct=Object(Ue.a)(qt,2),xt={sequences:a,state:{navigationOpen:!0,droneQRScannerActive:!1,sensorQRScannerActive:!1,surveyData:null,pages:[],pageNum:0,questions:{showNavigationButtons:!1,goNextPageAutomatic:!0,clearInvisibleValues:"onHidden",checkErrorsMode:"onValueChanged",pages:[{name:"general",title:"General",elements:[{name:"purpose",title:"Purpose",type:"dropdown",choices:["UAV","Planting","Spraying","Tilling","Harvest"],defaultValue:"UAV"},{name:"datetime",title:"Date/Time of data",type:"multipletext",defaultValue:{date:Ct[0],time:Ct[1]},items:[{name:"date",title:"Date",inputType:"date"},{name:"time",title:"Time",inputType:"time"}]},{name:"location",title:"Collection location",type:"panel",elements:[{name:"location-button",title:"Get current location",type:"html",cerebralbutton:"setCurrentLocation"},{name:"latitude",title:"Latitude",type:"text",isRequired:!0},{name:"longitude",title:"Longitude",type:"text",isRequired:!0}]},{name:"notes",title:"Notes or comments",type:"comment"}]},{name:"uav-operator",title:"UAV Operator",visibleIf:'{purpose} == "UAV"',elements:[{name:"license",title:"Operator License",type:"text",isRequired:!0,placeHolder:"1234567",validators:[{type:"regex",regex:/^[0-9]{7}$/,text:"Invalid license number"}]},{name:"operator",title:"Operator",type:"text",isRequired:!0,placeHolder:"Rusty Shackleford"},{name:"observer",title:"Observer",type:"text",placeHolder:"John Doe"}]},{name:"uav-drone",title:"Drone Info",visibleIf:'{purpose} == "UAV"',elements:[{name:"drone-screenshot",title:"Screenshot of DroneDeploy",type:"file",allowMultiple:!1},{name:"drone-qr",title:"Scan drone QR code",type:"html",cerebralbutton:"showDroneQRScanner"},{name:"uav-drone-type",title:"Type",type:"dropdown",isRequired:!0,defaultValue:"Fixed wing",hasOther:!0,choices:["Fixed wing","Multi-rotor","Helicopter"]},{name:"uav-drone",title:"Drone",type:"dropdown",hideIfChoicesEmpty:!0,choices:[{make:"Test",model:"testtest",type:"Fixed wing"}].map(function(e,t){return{text:e.make+" "+e.model,value:e.make+" "+e.model,visibleIf:'{uav-drone-type} == "'.concat(e.type,'"')}})},{name:"uav-drone-make",title:"Make",type:"text",enableIf:"{uav-drone} empty"},{name:"uav-drone-model",title:"Model",type:"text",enableIf:"{uav-drone} empty"}]},{name:"uav-sensors",title:"Sensors",visibleIf:'{purpose} == "UAV"',elements:[{name:"sensor-qr",type:"html",cerebralbutton:"showSensorQRScanner"},{name:"sensors",title:"Sensors",type:"paneldynamic",panelCount:1,panelAddText:"Add Sensor",panelRemoveText:"Remove Sensor",templateTitle:"Sensor #{panelIndex}",templateElements:[{name:"uav-sensor-type",valueName:"type",title:"Type",type:"dropdown",isRequired:!0,hasOther:!0,choices:["RGB","Multispectral","Hyperspectral","LiDAR","Thermal"]},{name:"uav-sensor",valueName:"sensor",title:"Sensor",type:"dropdown",hideIfChoicesEmpty:!0,choices:[{make:"Sony",model:"A6000",type:"RGB"},{make:"Parrot",model:"Sequoia",type:"Multispectral"}].map(function(e,t){return{text:e.make+" "+e.model,value:e.make+" "+e.model,visibleIf:'{panel.type} == "'.concat(e.type,'"')}})},{name:"uav-sensor-make",valueName:"sensor.make",title:"Make",type:"text",enableIf:"{panel.sensor} empty"},{name:"uav-sensor-model",valueName:"model",title:"Model",type:"text",enableIf:"{panel.sensor} empty"}]}]},{name:"b4ufly",title:"B4UFLY Status",visibleIf:'{purpose} == "UAV"',elements:[{name:"b4ufly-status",title:"Status",type:"dropdown",isRequired:!0,choices:["proceed with caution","flying in controlled airspace (class B/C/D/E)","other"]},{name:"b4ufly-extra",title:"",type:"panel",visibleIf:'{b4ufly-status} == "flying in controlled airspace (class B/C/D/E)" or {b4ufly-status} == "other"',elements:[{name:"b4ufly-airport-operator",title:"Airport Operator Contact",type:"text",requiredIf:'{b4ufly-status} == "flying in controlled airspace (class B/C/D/E)"'},{name:"b4ufly-control-tower",title:"Control Tower Contact",type:"text",requiredIf:'{b4ufly-status} == "flying in controlled airspace (class B/C/D/E)"'},{name:"b4ufly-prior-authorization",title:"Prior Authorization",type:"text",requiredIf:'{b4ufly-status} == "flying in controlled airspace (class B/C/D/E)"'}]},{name:"b4ufly-options",title:"Options",type:"checkbox",isRequired:!0,choices:["checked NOTAMS","checked flight restrictions","checked local restrictions","checked upcoming restrictions","checked national parks"]}]},{name:"planting",visibleIf:'!({purpose} == "UAV")',elements:[{name:"nyi",type:"html",html:"Not yet implemented"}]}]}},providers:r},At=Object(s.default)(xt,{devtools:null});i.a.render(u.a.createElement(l.Container,{app:At},u.a.createElement(Be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[129,2,1]]]);
//# sourceMappingURL=main.2d78d627.chunk.js.map